angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective);
function uiCodemirrorDirective(g,h){function k(b,a,c,d){var e=angular.extend({value:a.text()},h.codemirror||{},b.$eval(c.uiCodemirror),b.$eval(c.uiCodemirrorOpts)),f=l(a,e);m(f,c.uiCodemirror||c.uiCodemirrorOpts,b);n(f,d,b);p(f,c.uiRefresh,b);b.$on("CodeMirror",function(b,a){if(angular.isFunction(a))a(f);else throw Error("the CodeMirror event requires a callback function");});if(angular.isFunction(e.onLoad))e.onLoad(f)}function l(b,a){var c;"TEXTAREA"===b[0].tagName?c=window.CodeMirror.fromTextArea(b[0],
a):(b.html(""),c=new window.CodeMirror(function(a){b.append(a)},a));return c}function m(b,a,c){function d(a,c){angular.isObject(a)&&e.forEach(function(d){!a.hasOwnProperty(d)||c&&a[d]===c[d]||b.setOption(d,a[d])})}if(a){var e=Object.keys(window.CodeMirror.defaults);c.$watch(a,d,!0)}}function n(b,a,c){a&&(a.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw Error("ui-codemirror cannot use an object or an array as a model");return a}),
a.$render=function(){b.setValue(a.$viewValue||"")},b.on("change",function(b){var e=b.getValue();e!==a.$viewValue&&c.$evalAsync(function(){a.$setViewValue(e)})}))}function p(b,a,c){a&&c.$watch(a,function(a,c){a!==c&&g(function(){b.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw Error("ui-codemirror needs CodeMirror to work... (o rly?)");return k}}}uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"];
